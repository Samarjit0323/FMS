{% extends 'faculty/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <h3 class="pb-3 text-center">User Login</h3>
    
    <form method="post">
        {% csrf_token %}

        {{ form.username|as_crispy_field }}

        <div style="position: relative;">
            
            {{ form.password|as_crispy_field }}
            
            <span id="togglePassword" 
                  style="position: absolute; right: 12px; top: 40px; cursor: pointer;">
                  <i class="bi bi-eye" id="eyeIcon" style="color: #6c757d;"></i>
            </span>
        </div>

        <button type="submit" class="btn btn-primary mb-4">Login</button>
    </form>
    
    <div class="bottom" style="text-align: center;">
        Don't have an account?
        <a href="{% url 'register' %}" class="text-decoration-none m-2">
            Sign Up
        </a>
        <br>
        &nbsp;
        
        <a href="{% url 'home' %}" class="btn btn-primary m-3 text-decoration-none text-white">
            Back to Home
        </a>
        
        <a href="{% url 'password_reset' %}" class="text-white-emphasis">
            Forgot Password?
        </a>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // Find the icon's clickable *span*
        const togglePassword = document.querySelector('#togglePassword');
        // Find the icon itself
        const icon = document.querySelector('#eyeIcon');
        // Find the password input field
        const password = document.querySelector('#id_password');

        if (togglePassword && password) {
            
            togglePassword.addEventListener('click', function() {
                // Toggle the type attribute
                const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                password.setAttribute('type', type);

                // Toggle the icon
                icon.classList.toggle('bi-eye');
                icon.classList.toggle('bi-eye-slash');
                
                // Change color
                icon.style.color = type === 'text' ? '#0d6efd' : '#6c757d';
            });
        }
    });
</script>
{% endblock %}


